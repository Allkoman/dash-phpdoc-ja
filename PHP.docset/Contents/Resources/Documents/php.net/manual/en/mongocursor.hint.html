<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>クエリについてのヒントをデータベースに与える</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="mongocursor.hasnext.html">MongoCursor::hasNext</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="mongocursor.immortal.html">MongoCursor::immortal</a></div>
 <div class="up"><a href="class.mongocursor.html">MongoCursor</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="mongocursor.hint" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">MongoCursor::hint</h1>
  <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoCursor::hint</span> &mdash; <span class="dc-title">クエリについてのヒントをデータベースに与える</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-mongocursor.hint-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type"><a href="class.mongocursor.html" class="type MongoCursor">MongoCursor</a></span> <span class="methodname"><strong>MongoCursor::hint</strong></span>
    ( <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$index</code></span>
   )</div>

 </div>


 <div class="refsect1 parameters" id="refsect1-mongocursor.hint-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    
     <dt>

      <code class="parameter">index</code>
     </dt>

     <dd>

      <p class="para">
       クエリで使用するインデックス。
       文字列を渡した場合は、インデックス名として扱います。
       配列あるいはオブジェクトを渡した場合は、それに基づいてインデックスを組み立てます
       (<span class="function"><a href="mongocollection.ensureindex.html" class="function">MongoCollection::ensureIndex()</a></span> の最初の引数のようになります)。
      </p>
     </dd>

       
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-mongocursor.hint-returnvalues">
  <h3 class="title">返り値</h3>  
  <p class="para">
   このカーソルを返します。
  </p>
 </div>


 <div class="refsect1 errors" id="refsect1-mongocursor.hint-errors">
  <h3 class="title">エラー / 例外</h3>
  <p class="para">
   このカーソルの反復処理が始まっている場合に <a href="class.mongocursorexception.html" class="classname">MongoCursorException</a> をスローします。
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-mongocursor.hint-changelog">
  <h3 class="title">変更履歴</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead>
      <tr>
       <th>バージョン</th>
       <th>説明</th>
      </tr>

     </thead>

     <tbody class="tbody">
      <tr>
       <td>1.4.0</td>
       <td>
        <p class="para">
         <code class="parameter">index</code> 引数に、文字列でインデックス名を指定できるよういなりました。
         これより前のバージョンでは、配列またはオブジェクトしか渡せませんでした。
        </p>
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="117836""></a>
  <div class="note">
   <strong class="user">mr dot bipinks at gmail dot com</strong>
   <a href="#117836" class="date">18-Aug-2015 01:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For the series we'll assume we have a collection named posts populated with 500 documents having the following structure:<br />
<br />
{<br />
&nbsp;&nbsp;&nbsp; "_id": ObjectId("5146bb52d852470060001f4"),<br />
&nbsp;&nbsp;&nbsp; "comments": {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "0": "This is the first comment",<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "1": "This is the second comment"<br />
&nbsp;&nbsp;&nbsp; },<br />
&nbsp;&nbsp;&nbsp; "post_likes": 40,<br />
&nbsp;&nbsp;&nbsp; "post_tags": {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "0": "MongoDB",<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "1": "Tutorial",<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; "2": "Indexing"<br />
&nbsp;&nbsp;&nbsp; },<br />
&nbsp;&nbsp;&nbsp; "post_text": "Hello Readers!! This is my post text",<br />
&nbsp;&nbsp;&nbsp; "post_type": "private",<br />
&nbsp;&nbsp;&nbsp; "user_name": "Mark Anthony"<br />
}<br />
<br />
The hint() method can be used to force MongoDB to use an index we specify and override the default selection and query optimization process. You can specify the field names used in the index as a argument as shown below:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="comment">// query to find posts with type public and 100 likes<br />
// use hint() to force MongoDB to use the index we created<br />
</span><span class="default">$cursor </span><span class="keyword">= </span><span class="default">$collection<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">-&gt;</span><span class="default">find</span><span class="keyword">(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"post_type" </span><span class="keyword">=&gt; </span><span class="string">"public"</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"post_likes" </span><span class="keyword">=&gt; </span><span class="default">100<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; )<br />
&nbsp;&nbsp;&nbsp; -&gt;</span><span class="default">hint</span><span class="keyword">(<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; array(<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"post_type" </span><span class="keyword">=&gt; </span><span class="default">1</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="string">"post_likes" </span><span class="keyword">=&gt; </span><span class="default">1<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">)<br />
&nbsp;&nbsp;&nbsp; );<br />
</span><span class="default">?&gt;<br />
</span><br />
This ensures the query uses the compound index defined on the post_type and post_likes fields.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="mongocursor.hasnext.html">MongoCursor::hasNext</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="mongocursor.immortal.html">MongoCursor::immortal</a></div>
 <div class="up"><a href="class.mongocursor.html">MongoCursor</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
