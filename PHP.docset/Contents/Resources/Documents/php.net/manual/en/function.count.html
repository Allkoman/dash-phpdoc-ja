<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>変数に含まれるすべての要素、
  あるいはオブジェクトに含まれる何かの数を数える</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.compact.html">compact</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.current.html">current</a></div>
 <div class="up"><a href="ref.array.html">配列 関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.count" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">count</h1>
  <p class="verinfo">(PHP 4, PHP 5, PHP 7)</p><p class="refpurpose"><span class="refname">count</span> &mdash; <span class="dc-title">変数に含まれるすべての要素、
  あるいはオブジェクトに含まれる何かの数を数える</span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.count-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">int</span> <span class="methodname"><strong>count</strong></span>
    ( <span class="methodparam"><span class="type"><a href="language.pseudo-types.html#language.types.mixed" class="type mixed">mixed</a></span> <code class="parameter">$array_or_countable</code></span>
   [, <span class="methodparam"><span class="type">int</span> <code class="parameter">$mode</code><span class="initializer"> = COUNT_NORMAL</span></span>
  ] )</div>

  <p class="para rdfs-comment">
   変数に含まれるすべての要素、
   あるいはオブジェクトに含まれる何かの数を数えます。
  </p>
  <p class="para">
   オブジェクトに対して、もし <a href="ref.spl.html" class="link">SPL</a>
   がインストールされている場合、インターフェイス
   <a href="class.countable.html" class="classname">Countable</a> を実装することで <span class="function"><strong>count()</strong></span>
   にフックすることができます。このインターフェイスには 1 つのメソッド
   <span class="methodname"><a href="countable.count.html" class="methodname">Countable::count()</a></span> があり、<span class="function"><strong>count()</strong></span>
   関数に対する値を返します。
  </p>
  <p class="para">
   配列の実装やPHPでの使用法に関する詳細な説明については、マニュアルの
   <a href="language.types.array.html" class="link">配列</a>のセクションを参照ください。
  </p>
 </div>

 <div class="refsect1 parameters" id="refsect1-function.count-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    
     <dt>
<code class="parameter">array_or_countable</code></dt>

     <dd>

      <p class="para">
       配列あるいは <a href="class.countable.html" class="classname">Countable</a> オブジェクト。
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">mode</code></dt>

     <dd>

      <p class="para">
       オプションの<code class="parameter">mode</code> 引数が <strong><code>COUNT_RECURSIVE</code></strong>
       (または 1) にセットされた場合、<span class="function"><strong>count()</strong></span>
       は再帰的に配列をカウントします。
       これは多次元配列の全ての要素をカウントするといった場合に特に有効です。
      </p>
      <div class="caution"><strong class="caution">警告</strong>
       <p class="para">
        <span class="function"><strong>count()</strong></span> は、再帰を検出して無限ループを回避するようになっています。
        しかしその場合 (配列の中に自分自身が複数回登場する場合) は毎回 <strong><code>E_WARNING</code></strong>
        を発行し、期待する結果より大きい数を返します。
       </p>
      </div>
     </dd>

    
   </dl>

  </p>
 </div>

 <div class="refsect1 returnvalues" id="refsect1-function.count-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   <code class="parameter">array_or_countable</code> に含まれる要素の数を返します。
   もしパラメータが配列もしくは
   <a href="class.countable.html" class="classname">Countable</a> インターフェイスを実装したオブジェクトではない場合、
   <em>1</em> が返されます。
   ひとつ例外があり、<code class="parameter">array_or_countable</code> が <strong><code>NULL</code></strong> の場合、
   <em>0</em> が返されます。
  </p>
  <div class="caution"><strong class="caution">警告</strong>
   <p class="para">
    <span class="function"><strong>count()</strong></span> は、セットされていない変数に関して 0
    を返しますが、変数が空の配列として初期化されている場合にも 0 を返します。
    ある変数がセットされているかどうかを調べるには、
    <span class="function"><a href="function.isset.html" class="function">isset()</a></span> を使用してください。
   </p>
  </div>
 </div>

 <div class="refsect1 examples" id="refsect1-function.count-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="example-5653">
    <p><strong>例1 <span class="function"><strong>count()</strong></span> の例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$a</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$a</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">3</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$a</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">5</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$a</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">//&nbsp;$result&nbsp;==&nbsp;3<br /><br /></span><span style="color: #0000BB">$b</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]&nbsp;&nbsp;=&nbsp;</span><span style="color: #0000BB">7</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$b</span><span style="color: #007700">[</span><span style="color: #0000BB">5</span><span style="color: #007700">]&nbsp;&nbsp;=&nbsp;</span><span style="color: #0000BB">9</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$b</span><span style="color: #007700">[</span><span style="color: #0000BB">10</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">11</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$b</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">//&nbsp;$result&nbsp;==&nbsp;3<br /><br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">null</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">//&nbsp;$result&nbsp;==&nbsp;0<br /><br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">false</span><span style="color: #007700">);<br /></span><span style="color: #FF8000">//&nbsp;$result&nbsp;==&nbsp;1<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-5654">
    <p><strong>例2 再帰的な <span class="function"><strong>count()</strong></span> の例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$food&nbsp;</span><span style="color: #007700">=&nbsp;array(</span><span style="color: #DD0000">'fruits'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">'orange'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'banana'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'apple'</span><span style="color: #007700">),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">'veggie'&nbsp;</span><span style="color: #007700">=&gt;&nbsp;array(</span><span style="color: #DD0000">'carrot'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'collard'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'pea'</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">//&nbsp;再帰的なカウント<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$food</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">COUNT_RECURSIVE</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;output&nbsp;8<br /><br />//&nbsp;通常のカウント<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$food</span><span style="color: #007700">);&nbsp;</span><span style="color: #FF8000">//&nbsp;output&nbsp;2<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>

 <div class="refsect1 seealso" id="refsect1-function.count-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.is-array.html" class="function" rel="rdfs-seeAlso">is_array()</a> - 変数が配列かどうかを検査する</span></li>
    <li class="member"><span class="function"><a href="function.isset.html" class="function" rel="rdfs-seeAlso">isset()</a> - 変数がセットされていること、そして NULL でないことを検査する</span></li>
    <li class="member"><span class="function"><a href="function.empty.html" class="function" rel="rdfs-seeAlso">empty()</a> - 変数が空であるかどうかを検査する</span></li>
    <li class="member"><span class="function"><a href="function.strlen.html" class="function" rel="rdfs-seeAlso">strlen()</a> - 文字列の長さを得る</span></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="121584""></a>
  <div class="note">
   <strong class="user">ichegor at gmail dot com</strong>
   <a href="#121584" class="date">31-Aug-2017 07:15</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
To count items in multidem. array with specific key you can use:<br />
$groups = [<br />
&nbsp;&nbsp;&nbsp; [<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'id' =&gt; 1,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'name' =&gt; 'group 1',<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'items' =&gt; ['a','b','c','d'],<br />
&nbsp;&nbsp;&nbsp; ],<br />
&nbsp;&nbsp;&nbsp; [<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'id' =&gt; 2,<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'name' =&gt; 'group 2',<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; 'items' =&gt; ['e','f','g'],<br />
&nbsp;&nbsp;&nbsp; ]<br />
];<br />
<br />
$items_total = array_sum(array_map(function($v){return count($v['items']);},$groups)); // Result is 7.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="121451""></a>
  <div class="note">
   <strong class="user">jens1o</strong>
   <a href="#121451" class="date">28-Jul-2017 09:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Don't use count($array) if you want to check whether it's empty. Use empty($array) instead:<br />
<br />
Stats for 100000000 iterations:<br />
Empty($arr): 7.0643041133881s<br />
Count($arr) === 0: 11.981563091278s<br />
!count($arr): 11.872883081436s<br />
$arr === []: 9.6288840770721s<br />
<br />
with an empty whereas $arr is empty.<br />
<br />
Test script:<br />
<span class="default">&lt;?php<br />
<br />
$test </span><span class="keyword">= [];<br />
</span><span class="default">$startTime </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt;= </span><span class="default">100000000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp;&nbsp; if(empty(</span><span class="default">$test</span><span class="keyword">)) {<br />
<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$time </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">) - </span><span class="default">$startTime</span><span class="keyword">;<br />
echo </span><span class="string">'empty($arr): ' </span><span class="keyword">. </span><span class="default">$time </span><span class="keyword">. </span><span class="string">'s' </span><span class="keyword">. </span><span class="default">PHP_EOL</span><span class="keyword">;<br />
<br />
</span><span class="default">$startTime </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt;= </span><span class="default">100000000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">count</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">) === </span><span class="default">0</span><span class="keyword">) {<br />
<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$time </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">) - </span><span class="default">$startTime</span><span class="keyword">;<br />
echo </span><span class="string">'count($arr) === 0: ' </span><span class="keyword">. </span><span class="default">$time </span><span class="keyword">. </span><span class="string">'s' </span><span class="keyword">. </span><span class="default">PHP_EOL</span><span class="keyword">;<br />
<br />
</span><span class="default">$startTime </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt;= </span><span class="default">100000000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp;&nbsp; if(!</span><span class="default">count</span><span class="keyword">(</span><span class="default">$test</span><span class="keyword">)) {<br />
<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$time </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">) - </span><span class="default">$startTime</span><span class="keyword">;<br />
echo </span><span class="string">'!count($arr): ' </span><span class="keyword">. </span><span class="default">$time </span><span class="keyword">. </span><span class="string">'s'</span><span class="keyword">. </span><span class="default">PHP_EOL</span><span class="keyword">;<br />
<br />
</span><span class="default">$startTime </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">);<br />
for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">; </span><span class="default">$i </span><span class="keyword">&lt;= </span><span class="default">100000000</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp;&nbsp;&nbsp; if(</span><span class="default">$test </span><span class="keyword">=== []) {<br />
<br />
&nbsp;&nbsp;&nbsp; }<br />
}<br />
<br />
</span><span class="default">$time </span><span class="keyword">= </span><span class="default">microtime</span><span class="keyword">(</span><span class="default">true</span><span class="keyword">) - </span><span class="default">$startTime</span><span class="keyword">;<br />
echo </span><span class="string">'$arr === []: ' </span><span class="keyword">. </span><span class="default">$time </span><span class="keyword">. </span><span class="string">'s'</span><span class="keyword">. </span><span class="default">PHP_EOL</span><span class="keyword">;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="121025""></a>
  <div class="note">
   <strong class="user">Cees Timmerman</strong>
   <a href="#121025" class="date">27-Apr-2017 01:08</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
count(false);&nbsp; // Returns 1, not 0.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="120547""></a>
  <div class="note">
   <strong class="user">buyatv at gmail dot com</strong>
   <a href="#120547" class="date">28-Jan-2017 06:16</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can not get collect sub array count when use the key on only one sub array in an array: <br />
<br />
$a = array("a"=&gt;"appple", b"=&gt;array('a'=&gt;array(1,2,3),'b'=&gt;array(1,2,3)));<br />
$b = array("a"=&gt;"appple", "b"=&gt;array(array('a'=&gt;array(1,2,3),'b'=&gt;array(1,2,3)), array(1,2,3),'b'=&gt;array(1,2,3)), array('a'=&gt;array(1,2,3),'b'=&gt;array(1,2,3))));<br />
<br />
echo count($a['b']);&nbsp; // 2 NOT 1, expect 1<br />
echo count($b['b']);&nbsp; // 3,&nbsp;&nbsp; expected</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="120541""></a>
  <div class="note">
   <strong class="user">buyatv at gmail dot com</strong>
   <a href="#120541" class="date">27-Jan-2017 07:32</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
You can not get collect sub array count when there is only one sub array in an array: <br />
<br />
$a = array ( array ('a','b','c','d'));<br />
$b = array ( array ('a','b','c','d'), array ('e','f','g','h'));<br />
<br />
echo count($a);&nbsp; // 4 NOT 1, expect 1<br />
echo count($b);&nbsp; // 2,&nbsp;&nbsp; expected</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="120207""></a>
  <div class="note">
   <strong class="user">php_count at cubmd dot com</strong>
   <a href="#120207" class="date">23-Nov-2016 12:12</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
All the previous recursive count solutions with $depth option would not avoid infinite loops in case the array contains itself more than once.
<br />
Here's a working solution:
<br />

<br />
<span class="default">&lt;?php
<br />
&nbsp;&nbsp;&nbsp; </span><span class="comment">/**
<br />
&nbsp;&nbsp; &nbsp; * Recursively count elements in an array. Behaves exactly the same as native
<br />
&nbsp;&nbsp; &nbsp; * count() function with the $depth option. Meaning it will also add +1 to the
<br />
&nbsp;&nbsp; &nbsp; * total count, for the parent element, and not only counting its children.
<br />
&nbsp;&nbsp; &nbsp; * @param $arr
<br />
&nbsp;&nbsp; &nbsp; * @param int $depth
<br />
&nbsp;&nbsp; &nbsp; * @param int $i (internal)
<br />
&nbsp;&nbsp; &nbsp; * @return int
<br />
&nbsp;&nbsp; &nbsp; */
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">public static function </span><span class="default">countRecursive</span><span class="keyword">(&amp;</span><span class="default">$arr</span><span class="keyword">, </span><span class="default">$depth </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$i</span><span class="keyword">++;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">/**
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * In case the depth is 0, use the native count function
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; */
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (empty(</span><span class="default">$depth</span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">count</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">, </span><span class="default">COUNT_RECURSIVE</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$count </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">/**
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; * This can occur only the first time when the method is called and $arr is not an array
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; */
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">)) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">count</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// if this key is present, it means you already walked this array
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if (isset(</span><span class="default">$arr</span><span class="keyword">[</span><span class="string">'__been_here'</span><span class="keyword">])) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$arr</span><span class="keyword">[</span><span class="string">'__been_here'</span><span class="keyword">] = </span><span class="default">true</span><span class="keyword">;
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$key </span><span class="keyword">=&gt; &amp;</span><span class="default">$value</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$key </span><span class="keyword">!== </span><span class="string">'__been_here'</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">) &amp;&amp; </span><span class="default">$depth </span><span class="keyword">&gt; </span><span class="default">$i</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$count </span><span class="keyword">+= </span><span class="default">self</span><span class="keyword">::</span><span class="default">countRecursive</span><span class="keyword">(</span><span class="default">$value</span><span class="keyword">, </span><span class="default">$depth</span><span class="keyword">, </span><span class="default">$i</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$count</span><span class="keyword">++;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />

<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">// you need to unset it when done because you're working with a reference...
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">unset(</span><span class="default">$arr</span><span class="keyword">[</span><span class="string">'__been_here'</span><span class="keyword">]);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$count</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; }
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="119190""></a>
  <div class="note">
   <strong class="user">ayyappan dot ashok at gmail dot com</strong>
   <a href="#119190" class="date">18-Apr-2016 04:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
/** Count of objects */<br />
<br />
&nbsp;class ABC{ }<br />
&nbsp;$objecto = new ABC();<br />
&nbsp;$total = count((array)$object); //Returns Zero.<br />
&nbsp;$total = count($object); //Returns One<br />
&nbsp;echo $total;</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="118512""></a>
  <div class="note">
   <strong class="user">ThisIsNotImportant</strong>
   <a href="#118512" class="date">18-Dec-2015 12:10</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
About 2d arrays, you have many way to count elements :<br />
<br />
<span class="default">&lt;?php<br />
$MyArray </span><span class="keyword">= array ( array(</span><span class="default">1</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">),<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">1</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="string">'a'</span><span class="keyword">,<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; array(</span><span class="string">'a'</span><span class="keyword">,</span><span class="string">'b'</span><span class="keyword">,</span><span class="string">'c'</span><span class="keyword">,</span><span class="string">'d'</span><span class="keyword">) );<br />
<br />
</span><span class="comment">// All elements<br />
</span><span class="keyword">echo </span><span class="default">count</span><span class="keyword">(</span><span class="default">$MyArray </span><span class="keyword">,</span><span class="default">COUNT_RECURSIVE</span><span class="keyword">);&nbsp; </span><span class="comment">// output 11 (9 values + 2 arrays)<br />
<br />
// First level elements<br />
</span><span class="keyword">echo </span><span class="default">count</span><span class="keyword">(</span><span class="default">$MyArray </span><span class="keyword">);&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="comment">// output 4 (2 values+ 2 arrays)<br />
<br />
// Both level values, but only values<br />
</span><span class="keyword">echo(</span><span class="default">array_sum</span><span class="keyword">(</span><span class="default">array_map</span><span class="keyword">(</span><span class="string">'count'</span><span class="keyword">,</span><span class="default">$MyArray </span><span class="keyword">))); </span><span class="comment">//output 9 (9 values)<br />
<br />
// Only second level values<br />
</span><span class="keyword">echo (</span><span class="default">count</span><span class="keyword">(</span><span class="default">$MyArray </span><span class="keyword">,</span><span class="default">COUNT_RECURSIVE</span><span class="keyword">)-</span><span class="default">count</span><span class="keyword">(</span><span class="default">$MyArray </span><span class="keyword">)); </span><span class="comment">//output 7 ((all elements) - (first elements))<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117404""></a>
  <div class="note">
   <strong class="user">pied-pierre</strong>
   <a href="#117404" class="date">05-Jun-2015 02:27</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A function of one line to find the number of elements that are not arrays, recursively :<br />
<br />
function count_elt($array, &amp;$count=0){<br />
&nbsp; foreach($array as $v) if(is_array($v)) count_elt($v,$count); else ++$count;<br />
&nbsp; return $count;<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117224""></a>
  <div class="note">
   <strong class="user">JumpIfBelow</strong>
   <a href="#117224" class="date">05-May-2015 11:18</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
As I see in many codes, don't use count to iterate through array.<br />
Onlyranga says you could declare a variable to store it before the for loop.<br />
I agree with his/her approach, using count in the test should be used ONLY if you have to count the size of the array for each loop.<br />
<br />
You can do it in the for loop too, so you don't have to "search" where the variable is set.<br />
e.g.<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp;&nbsp; $array </span><span class="keyword">= [</span><span class="default">1</span><span class="keyword">, </span><span class="default">5</span><span class="keyword">, </span><span class="string">'element'</span><span class="keyword">];<br />
&nbsp;&nbsp;&nbsp; for(</span><span class="default">$i </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">, </span><span class="default">$c </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">); </span><span class="default">$i </span><span class="keyword">&lt; </span><span class="default">$c</span><span class="keyword">; </span><span class="default">$i</span><span class="keyword">++)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">var_dump</span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">[</span><span class="default">$i</span><span class="keyword">]);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114924""></a>
  <div class="note">
   <strong class="user">onlyranga at gmail dot com</strong>
   <a href="#114924" class="date">28-Apr-2014 11:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
[Editor's note: array at from dot pl had pointed out that count() is a cheap operation; however, there's still the function call overhead.]
<br />

<br />
If you want to run through large arrays don't use count() function in the loops , its a over head in performance,&nbsp; copy the count() value into a variable and use that value in loops for a better performance.
<br />

<br />
Eg:
<br />

<br />
// Bad approach
<br />

<br />
for($i=0;$i&lt;count($some_arr);$i++)
<br />
{
<br />
&nbsp;&nbsp;&nbsp; // calculations
<br />
}
<br />

<br />
// Good approach
<br />

<br />
$arr_length = count($some_arr);
<br />
for($i=0;$i&lt;$arr_length;$i++)
<br />
{
<br />
&nbsp;&nbsp;&nbsp; // calculations
<br />
}</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113868""></a>
  <div class="note">
   <strong class="user">Gerd Christian Kunze</strong>
   <a href="#113868" class="date">11-Dec-2013 09:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Get maxWidth and maxHeight of a two dimensional array..?<br />
<br />
Note:<br />
1st dimension = Y (height)<br />
2nd dimension = X (width)<br />
e.g. rows and cols in database result arrays<br />
<br />
<span class="default">&lt;?php<br />
$TwoDimensionalArray </span><span class="keyword">= array( </span><span class="default">0 </span><span class="keyword">=&gt; array( </span><span class="string">'key' </span><span class="keyword">=&gt; </span><span class="string">'value'</span><span class="keyword">, ...), ... );<br />
</span><span class="default">?&gt;<br />
</span><br />
So for Y (maxHeight) <br />
<span class="default">&lt;?php<br />
$maxHeight </span><span class="keyword">= </span><span class="default">count</span><span class="keyword">( </span><span class="default">$TwoDimensionalArray </span><span class="keyword">)<br />
</span><span class="default">?&gt;<br />
</span><br />
And for X (maxWidth)<br />
<span class="default">&lt;?php<br />
$maxWidth </span><span class="keyword">= </span><span class="default">max</span><span class="keyword">( </span><span class="default">array_map</span><span class="keyword">( </span><span class="string">'count'</span><span class="keyword">,&nbsp; </span><span class="default">$TwoDimensionalArray </span><span class="keyword">) );<br />
</span><span class="default">?&gt;<br />
</span><br />
Simple? ;-)</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="75737""></a>
  <div class="note">
   <strong class="user">danny at dannymendel dot com</strong>
   <a href="#75737" class="date">13-Jun-2007 10:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I actually find the following function more useful when it comes to multidimension arrays when you do not want all levels of the array tree.
<br />

<br />
// $limit is set to the number of recursions
<br />
<span class="default">&lt;?php
<br />
</span><span class="keyword">function </span><span class="default">count_recursive </span><span class="keyword">(</span><span class="default">$array</span><span class="keyword">, </span><span class="default">$limit</span><span class="keyword">) {
<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$count </span><span class="keyword">= </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp;&nbsp; foreach (</span><span class="default">$array </span><span class="keyword">as </span><span class="default">$id </span><span class="keyword">=&gt; </span><span class="default">$_array</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">is_array </span><span class="keyword">(</span><span class="default">$_array</span><span class="keyword">) &amp;&amp; </span><span class="default">$limit </span><span class="keyword">&gt; </span><span class="default">0</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$count </span><span class="keyword">+= </span><span class="default">count_recursive </span><span class="keyword">(</span><span class="default">$_array</span><span class="keyword">, </span><span class="default">$limit </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$count </span><span class="keyword">+= </span><span class="default">1</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; }
<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$count</span><span class="keyword">;
<br />
}
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="71015""></a>
  <div class="note">
   <strong class="user">alexandr at vladykin dot pp dot ru</strong>
   <a href="#71015" class="date">08-Nov-2006 01:28</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
My function returns the number of elements in array for multidimensional arrays subject to depth of array. (Almost COUNT_RECURSIVE, but you can point on which depth you want to plunge).
<br />

<br />
<span class="default">&lt;?php
<br />
&nbsp; </span><span class="keyword">function </span><span class="default">getArrCount </span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">, </span><span class="default">$depth</span><span class="keyword">=</span><span class="default">1</span><span class="keyword">) {
<br />
&nbsp;&nbsp; &nbsp;&nbsp; if (!</span><span class="default">is_array</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">) || !</span><span class="default">$depth</span><span class="keyword">) return </span><span class="default">0</span><span class="keyword">;
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; 
<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">$res</span><span class="keyword">=</span><span class="default">count</span><span class="keyword">(</span><span class="default">$arr</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; 
<br />
&nbsp;&nbsp; &nbsp;&nbsp; foreach (</span><span class="default">$arr </span><span class="keyword">as </span><span class="default">$in_ar</span><span class="keyword">)
<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="default">$res</span><span class="keyword">+=</span><span class="default">getArrCount</span><span class="keyword">(</span><span class="default">$in_ar</span><span class="keyword">, </span><span class="default">$depth</span><span class="keyword">-</span><span class="default">1</span><span class="keyword">);
<br />
&nbsp;&nbsp; &nbsp;&nbsp; 
<br />
&nbsp;&nbsp; &nbsp;&nbsp; return </span><span class="default">$res</span><span class="keyword">;
<br />
&nbsp; }
<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.compact.html">compact</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.current.html">current</a></div>
 <div class="up"><a href="ref.array.html">配列 関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
