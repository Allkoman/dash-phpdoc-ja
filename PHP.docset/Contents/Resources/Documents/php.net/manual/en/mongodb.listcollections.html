<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>このデータベース内のすべてのコレクションの MongoCollection オブジェクトの配列を取得する</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="mongodb.lasterror.html">MongoDB::lastError</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="mongodb.preverror.html">MongoDB::prevError</a></div>
 <div class="up"><a href="class.mongodb.html">MongoDB</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="mongodb.listcollections" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">MongoDB::listCollections</h1>
  <p class="verinfo">(PECL mongo &gt;=0.9.0)</p><p class="refpurpose"><span class="refname">MongoDB::listCollections</span> &mdash; <span class="dc-title">このデータベース内のすべてのコレクションの MongoCollection オブジェクトの配列を取得する</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-mongodb.listcollections-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type">array</span> <span class="methodname"><strong>MongoDB::listCollections</strong></span>
    ([ <span class="methodparam"><span class="type">array</span> <code class="parameter">$options</code><span class="initializer"> = array()</span></span>
  ] )</div>

  <p class="para rdfs-comment">
   データベース内のすべてのコレクションのリストを取得し、
   <a href="class.mongocollection.html" class="classname">MongoCollection</a> オブジェクトの配列で返します。
  </p>
  <blockquote class="note"><p><strong class="note">注意</strong>: <span class="simpara">このメソッドは、MongoDB 2.8 以降と通信する際に、データベースコマンド <a href="https://docs.mongodb.com/manual/reference/command/listCollections" class="link external" title="Link : https://docs.mongodb.com/manual/reference/command/listCollections">&raquo;&nbsp;listCollections</a> を利用します。以前のバージョンのデータベースの場合は、特別なコレクション <em>system.namespaces</em> を問い合わせます。</span></p></blockquote>
 </div>


 <div class="refsect1 parameters" id="refsect1-mongodb.listcollections-parameters">
  <h3 class="title">パラメータ</h3>
  <dl>

   
    <dt>

     <code class="parameter">options</code>
    </dt>

    <dd>

     <p class="para">
      コレクションの一覧を取得する際のオプションの配列。現在利用可能なオプションは、以下のとおりです。
      <ul class="itemizedlist">
       <li class="listitem"><p class="para"><em>&quot;filter&quot;</em></p><p class="para">オプションの問い合わせ条件。これを指定すると、結果に含まれるコレクションをその条件でフィルタリングします。</p><p class="para">問い合わせの対象となる関連フィールドには、<em>&quot;name&quot;</em> (コレクション名を表す文字列。データベース名のプレフィックスは含まない) や <em>&quot;options&quot;</em> (コレクションを作成するために用いるオプションを含むオブジェクト) があります。</p><blockquote class="note"><p><strong class="note">注意</strong>: <span class="simpara">MongoDB 2.6 以前のバージョンでは、<em>&quot;name&quot;</em> の条件指定には文字列しか使えませんでした (一致する文字列だけに絞り込むなど)。これは、ドライバが <em>system.namespaces</em> コレクションに問い合わせるときに、その値をデータベース名の先頭に付加する必要があったからです。最新版の MongoDB にはこの制約がなくなりました。listCollections コマンドを使うようになったからです。</span></p></blockquote></li>
       <li class="listitem"><p class="para"><em>&quot;includeSystemCollections&quot;</em></p><p class="para">Boolean で、デフォルトは <strong><code>FALSE</code></strong> です。system コレクションを結果に含めるかどうかを指定します。</p></li>
      </ul>
     </p>
     <p class="para">
      以下のオプションは、MongoDB 2.8 以降で利用可能です。
      <ul class="itemizedlist">
       <li class="listitem"><p class="para"><em>&quot;maxTimeMS&quot;</em></p><p class="para">サーバー上で操作を行う累積時間の制限 (アイドル時間を含まない) を、ミリ秒単位で指定します。この時間内にサーバー側の操作が完了しなければ、<a href="class.mongoexecutiontimeoutexception.html" class="classname">MongoExecutionTimeoutException</a> をスローします。</p></li>
      </ul>
     </p>
    </dd>

   
  </dl>

 </div>


 <div class="refsect1 returnvalues" id="refsect1-mongodb.listcollections-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   MongoCollection オブジェクトの配列を返します。
  </p>
 </div>


 <div class="refsect1 errors" id="refsect1-mongodb.listcollections-errors">
  <h3 class="title">エラー / 例外</h3>
  <p class="para">
   MongoDB 2.6 およびそれ以前のバージョンでは、
   <em>&quot;filter&quot;</em> オプションの <em>&quot;name&quot;</em> に文字列以外の値を指定した場合に
   <a href="class.mongoexception.html" class="classname">MongoException</a> をスローします。
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-mongodb.listcollections-changelog">
  <h3 class="title">変更履歴</h3>
  <table class="doctable informaltable">
   
    <thead>
     <tr>
      <th>バージョン</th>
      <th>説明</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td>1.6.0</td>
      <td>
       最初のパラメータがオプションの配列に変わりました。以前のバージョンでは最初のパラメータは boolean で、
       <em>&quot;includeSystemCollections&quot;</em> オプションの値を指定するものでした。
      </td>
     </tr>

     <tr>
      <td>1.3.0</td>
      <td>
       <code class="parameter">includeSystemCollections</code> が追加されました。
      </td>
     </tr>

    </tbody>
   
  </table>

 </div>


 <div class="refsect1 examples" id="refsect1-mongodb.listcollections-examples">
  <h3 class="title">例</h3>
  <div class="example" id="example-1537">
   <p><strong>例1 <span class="function"><strong>MongoDB::listCollections()</strong></span> の例</strong></p>
   <div class="example-contents"><p>
    次の例は、データベース内の各コレクションの件数を数えます。
   </p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />$m&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">MongoClient</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$db&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">selectDB</span><span style="color: #007700">(</span><span style="color: #DD0000">"demo"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$collections&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$db</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">listCollections</span><span style="color: #007700">();<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$collections&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"amount&nbsp;of&nbsp;documents&nbsp;in&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #DD0000">:&nbsp;"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #0000BB">$collection</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">count</span><span style="color: #007700">(),&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />}<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>上の例の出力は、
たとえば以下のようになります。</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
...
amount of documents in demo.pubs: 4
amount of documents in demo.elephpants: 3
amount of documents in demo.cities: 22840
...
</pre></div>
   </div>
  </div>
 </div>


 <div class="refsect1 seealso" id="refsect1-mongodb.listcollections-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="mongodb.getcollectionnames.html" class="function" rel="rdfs-seeAlso">MongoDB::getCollectionNames()</a> - このデータベースのすべてのコレクション名の配列を取得する</span></li>
    <li class="member"><span class="function"><a href="mongodb.getcollectioninfo.html" class="function" rel="rdfs-seeAlso">MongoDB::getCollectionInfo()</a> - Returns information about collections in this database</span></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="115140""></a>
  <div class="note">
   <strong class="user">George Gombay</strong>
   <a href="#115140" class="date">03-Jun-2014 05:53</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
For an alternative to the shell command 'show dbs', refer to my note for the listDBs() method of Mongoclient(), which reproduces some simple PHP code that will yield the names of all database present.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="mongodb.lasterror.html">MongoDB::lastError</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="mongodb.preverror.html">MongoDB::prevError</a></div>
 <div class="up"><a href="class.mongodb.html">MongoDB</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
