<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>タイムスタンプを変更する</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="datetime.getlasterrors.html">DateTime::getLastErrors</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="datetime.set-state.html">DateTime::__set_state</a></div>
 <div class="up"><a href="class.datetime.html">DateTime</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="datetime.modify" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">DateTime::modify</h1>
  <h1 class="refname">date_modify</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.2.0, PHP 7)</p><p class="refpurpose"><span class="refname">DateTime::modify</span> -- <span class="refname">date_modify</span> &mdash; <span class="dc-title">タイムスタンプを変更する</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-datetime.modify-description">
  <h3 class="title">説明</h3>
  <p class="para">オブジェクト指向型</p>
  <div class="methodsynopsis dc-description">
   <span class="modifier">public</span> <span class="type"><a href="class.datetime.html" class="type DateTime">DateTime</a></span> <span class="methodname"><strong>DateTime::modify</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$modify</code></span>
   )</div>

  <p class="para rdfs-comment">手続き型</p>
  <div class="methodsynopsis dc-description">
   <span class="type"><a href="class.datetime.html" class="type DateTime">DateTime</a></span> <span class="methodname"><a href="function.date-modify.html" class="methodname">date_modify</a></span>
    ( <span class="methodparam"><span class="type"><a href="class.datetime.html" class="type DateTime">DateTime</a></span> <code class="parameter">$object</code></span>
   , <span class="methodparam"><span class="type">string</span> <code class="parameter">$modify</code></span>
   )</div>

  <p class="para rdfs-comment">
   <span class="function"><a href="function.strtotime.html" class="function">strtotime()</a></span> 形式で加算あるいは減算することによって
   DateTime オブジェクトのタイムスタンプを変更します。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-datetime.modify-parameters">
  <h3 class="title">パラメータ</h3>
  <dl>

   <dt>
<code class="parameter">object</code></dt>

<dd>
<p class="para">手続き型のみ: 
<span class="function"><a href="function.date-create.html" class="function">date_create()</a></span> が返す <a href="class.datetime.html" class="classname">DateTime</a> オブジェクト。
この関数は、このオブジェクトを変更します。</p></dd>

   
    <dt>
<code class="parameter">modify</code></dt>

    <dd>

     <p class="para">日付/時刻 文字列。有効な書式については <a href="datetime.formats.html" class="link">日付と時刻の書式</a> で説明しています。</p>
    </dd>

   
  </dl>

 </div>


 <div class="refsect1 returnvalues" id="refsect1-datetime.modify-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   メソッドチェインに使う <a href="class.datetime.html" class="classname">DateTime</a> オブジェクトを返します。失敗した場合に <strong><code>FALSE</code></strong> を返します。
  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-datetime.modify-changelog">
  <h3 class="title">変更履歴</h3>
  <table class="doctable informaltable">
   
    <thead>
     <tr>
      <th>バージョン</th>
      <th>説明</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
      <td>5.3.6</td>
      <td>
       日付/時刻の絶対指定も効果を及ぼすようになりました。
       これまでは、相対指定部分だけを用いていました。
      </td>
     </tr>

     <tr><td>5.3.0</td><td>成功した場合の返り値が
<strong><code>NULL</code></strong> から <a href="class.datetime.html" class="classname">DateTime</a> に変更されました。</td></tr>

    </tbody>
   
  </table>

 </div>


 <div class="refsect1 examples" id="refsect1-datetime.modify-examples">
  <h3 class="title">例</h3>
  <div class="example" id="example-2526">
   <p><strong>例1 <span class="function"><strong>DateTime::modify()</strong></span> の例</strong></p>
   <div class="example-contents"><p>オブジェクト指向型</p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$date&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">DateTime</span><span style="color: #007700">(</span><span style="color: #DD0000">'2006-12-12'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$date</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">modify</span><span style="color: #007700">(</span><span style="color: #DD0000">'+1&nbsp;day'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$date</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'Y-m-d'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>手続き型</p></div>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$date&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">date_create</span><span style="color: #007700">(</span><span style="color: #DD0000">'2006-12-12'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">date_modify</span><span style="color: #007700">(</span><span style="color: #0000BB">$date</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'+1&nbsp;day'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">date_format</span><span style="color: #007700">(</span><span style="color: #0000BB">$date</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'Y-m-d'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>上の例の出力は以下となります。</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
2006-12-13
</pre></div>
   </div>
  </div>
  <div class="example" id="example-2527">
   <p><strong>例2 月の加減算には注意</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$date&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">DateTime</span><span style="color: #007700">(</span><span style="color: #DD0000">'2000-12-31'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$date</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">modify</span><span style="color: #007700">(</span><span style="color: #DD0000">'+1&nbsp;month'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$date</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'Y-m-d'</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$date</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">modify</span><span style="color: #007700">(</span><span style="color: #DD0000">'+1&nbsp;month'</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #0000BB">$date</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(</span><span style="color: #DD0000">'Y-m-d'</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>上の例の出力は以下となります。</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
2001-01-31
2001-03-03
</pre></div>
   </div>
  </div>
 </div>


 <div class="refsect1 seealso" id="refsect1-datetime.modify-seealso">
  <h3 class="title">参考</h3>
  <ul class="simplelist">
   <li class="member"><span class="function"><a href="function.strtotime.html" class="function" rel="rdfs-seeAlso">strtotime()</a> - 英文形式の日付を Unix タイムスタンプに変換する</span></li>
   <li class="member"><span class="function"><a href="datetime.add.html" class="function" rel="rdfs-seeAlso">DateTime::add()</a> - 年月日時分秒の値を DateTime オブジェクトに加える</span></li>
   <li class="member"><span class="function"><a href="datetime.sub.html" class="function" rel="rdfs-seeAlso">DateTime::sub()</a> - 年月日時分秒の値を DateTime オブジェクトから引く</span></li>
   <li class="member"><span class="function"><a href="datetime.setdate.html" class="function" rel="rdfs-seeAlso">DateTime::setDate()</a> - 日付を設定する</span></li>
   <li class="member"><span class="function"><a href="datetime.setisodate.html" class="function" rel="rdfs-seeAlso">DateTime::setISODate()</a> - ISO 日付を設定する</span></li>
   <li class="member"><span class="function"><a href="datetime.settime.html" class="function" rel="rdfs-seeAlso">DateTime::setTime()</a> - 時刻を設定する</span></li>
   <li class="member"><span class="function"><a href="datetime.settimestamp.html" class="function" rel="rdfs-seeAlso">DateTime::setTimestamp()</a> - Unix タイムスタンプを用いて日付と時刻を設定する</span></li>
  </ul>
 </div>


</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="120513""></a>
  <div class="note">
   <strong class="user">mangotonk at gmail dot com</strong>
   <a href="#120513" class="date">24-Jan-2017 02:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
a slightly more compact way of getting the month shift<br />
<br />
<span class="default">&lt;?php<br />
<br />
&nbsp;&nbsp; &nbsp;&nbsp; </span><span class="comment">/**<br />
&nbsp;&nbsp; &nbsp; * correctly calculates end of months when we shift to a shorter or longer month<br />
&nbsp;&nbsp; &nbsp; * workaround for <a href="http://php.net/manual/en/datetime.add.php#example-2489 " rel="nofollow" target="_blank">http://php.net/manual/en/datetime.add.php#example-2489 </a><br />
&nbsp;&nbsp; &nbsp; * <br />
&nbsp;&nbsp; &nbsp; * Makes the assumption that shifting from the 28th Feb +1 month is 31st March<br />
&nbsp;&nbsp; &nbsp; * Makes the assumption that shifting from the 28th Feb -1 month is 31st Jan<br />
&nbsp;&nbsp; &nbsp; * Makes the assumption that shifting from the 29,30,31 Jan +1 month is 28th (or 29th) Feb<br />
&nbsp;&nbsp; &nbsp; *<br />
&nbsp;&nbsp; &nbsp; * <br />
&nbsp;&nbsp; &nbsp; * @param DateTime $aDate<br />
&nbsp;&nbsp; &nbsp; * @param int $months positive or negative<br />
&nbsp;&nbsp; &nbsp; * <br />
&nbsp;&nbsp; &nbsp; * @return DateTime new instance - original parameter is unchanged<br />
&nbsp;&nbsp; &nbsp; */<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">function </span><span class="default">MonthShifter </span><span class="keyword">(</span><span class="default">DateTime $aDate</span><span class="keyword">,</span><span class="default">$months</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dateA </span><span class="keyword">= clone(</span><span class="default">$aDate</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$dateB </span><span class="keyword">= clone(</span><span class="default">$aDate</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$plusMonths </span><span class="keyword">= clone(</span><span class="default">$dateA</span><span class="keyword">-&gt;</span><span class="default">modify</span><span class="keyword">(</span><span class="default">$months </span><span class="keyword">. </span><span class="string">' Month'</span><span class="keyword">));<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">//check whether reversing the month addition gives us the original day back<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="keyword">if(</span><span class="default">$dateB </span><span class="keyword">!= </span><span class="default">$dateA</span><span class="keyword">-&gt;</span><span class="default">modify</span><span class="keyword">(</span><span class="default">$months</span><span class="keyword">*-</span><span class="default">1 </span><span class="keyword">. </span><span class="string">' Month'</span><span class="keyword">)){ <br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">$plusMonths</span><span class="keyword">-&gt;</span><span class="default">modify</span><span class="keyword">(</span><span class="string">'last day of last month'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } elseif(</span><span class="default">$aDate </span><span class="keyword">== </span><span class="default">$dateB</span><span class="keyword">-&gt;</span><span class="default">modify</span><span class="keyword">(</span><span class="string">'last day of this month'</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">=&nbsp; </span><span class="default">$plusMonths</span><span class="keyword">-&gt;</span><span class="default">modify</span><span class="keyword">(</span><span class="string">'last day of this month'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; } else {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$result </span><span class="keyword">= </span><span class="default">$plusMonths</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; return </span><span class="default">$result</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
</span><span class="comment">//TEST<br />
<br />
</span><span class="default">$x </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">'2017-01-30'</span><span class="keyword">);<br />
echo( </span><span class="default">$x</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y-m-d'</span><span class="keyword">).</span><span class="string">" past end of feb, but not dec&lt;br&gt;"</span><span class="keyword">);<br />
echo(</span><span class="string">'b ' </span><span class="keyword">. </span><span class="default">MonthShifter</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">)-&gt;</span><span class="default">format</span><span class="keyword">((</span><span class="string">'Y-m-d'</span><span class="keyword">)).</span><span class="string">"&lt;br&gt;"</span><span class="keyword">);<br />
echo(</span><span class="string">'c ' </span><span class="keyword">. </span><span class="default">MonthShifter</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">,-</span><span class="default">1</span><span class="keyword">)-&gt;</span><span class="default">format</span><span class="keyword">((</span><span class="string">'Y-m-d'</span><span class="keyword">)).</span><span class="string">"&lt;br&gt;"</span><span class="keyword">);<br />
<br />
</span><span class="default">$x </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">'2017-01-15'</span><span class="keyword">);<br />
echo(</span><span class="string">"&lt;br&gt;" </span><span class="keyword">. </span><span class="default">$x</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y-m-d'</span><span class="keyword">).</span><span class="string">" middle of the month &lt;br&gt;"</span><span class="keyword">);<br />
echo(</span><span class="string">'d ' </span><span class="keyword">. </span><span class="default">MonthShifter</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">)-&gt;</span><span class="default">format</span><span class="keyword">((</span><span class="string">'Y-m-d'</span><span class="keyword">)).</span><span class="string">"&lt;br&gt;"</span><span class="keyword">);<br />
echo(</span><span class="string">'e ' </span><span class="keyword">. </span><span class="default">MonthShifter</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">,-</span><span class="default">1</span><span class="keyword">)-&gt;</span><span class="default">format</span><span class="keyword">((</span><span class="string">'Y-m-d'</span><span class="keyword">)).</span><span class="string">"&lt;br&gt;"</span><span class="keyword">);<br />
<br />
</span><span class="default">$x </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">'2017-02-28'</span><span class="keyword">);<br />
echo(</span><span class="string">"&lt;br&gt;" </span><span class="keyword">. </span><span class="default">$x</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y-m-d'</span><span class="keyword">).</span><span class="string">" end of Feb&lt;br&gt;"</span><span class="keyword">);<br />
echo(</span><span class="string">'f ' </span><span class="keyword">. </span><span class="default">MonthShifter</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">)-&gt;</span><span class="default">format</span><span class="keyword">((</span><span class="string">'Y-m-d'</span><span class="keyword">)).</span><span class="string">"&lt;br&gt;"</span><span class="keyword">);<br />
echo(</span><span class="string">'g ' </span><span class="keyword">. </span><span class="default">MonthShifter</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">,-</span><span class="default">1</span><span class="keyword">)-&gt;</span><span class="default">format</span><span class="keyword">((</span><span class="string">'Y-m-d'</span><span class="keyword">)).</span><span class="string">"&lt;br&gt;"</span><span class="keyword">);<br />
<br />
</span><span class="default">$x </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">'2017-01-31'</span><span class="keyword">);<br />
echo(</span><span class="string">"&lt;br&gt;" </span><span class="keyword">.&nbsp; </span><span class="default">$x</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y-m-d'</span><span class="keyword">).</span><span class="string">" end of Jan&lt;br&gt;"</span><span class="keyword">);<br />
echo(</span><span class="string">'h ' </span><span class="keyword">. </span><span class="default">MonthShifter</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">,</span><span class="default">1</span><span class="keyword">)-&gt;</span><span class="default">format</span><span class="keyword">((</span><span class="string">'Y-m-d'</span><span class="keyword">)).</span><span class="string">"&lt;br&gt;"</span><span class="keyword">);<br />
echo(</span><span class="string">'i ' </span><span class="keyword">. </span><span class="default">MonthShifter</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">,-</span><span class="default">1</span><span class="keyword">)-&gt;</span><span class="default">format</span><span class="keyword">((</span><span class="string">'Y-m-d'</span><span class="keyword">)).</span><span class="string">"&lt;br&gt;"</span><span class="keyword">);<br />
<br />
</span><span class="default">$x </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">'2017-01-31'</span><span class="keyword">);<br />
echo(</span><span class="string">"&lt;br&gt;" </span><span class="keyword">.&nbsp; </span><span class="default">$x</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y-m-d'</span><span class="keyword">).</span><span class="string">" end of Jan +/- 1 years diff, leap year respected&lt;br&gt;"</span><span class="keyword">);<br />
echo(</span><span class="string">'j ' </span><span class="keyword">. </span><span class="default">MonthShifter</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">,</span><span class="default">13</span><span class="keyword">)-&gt;</span><span class="default">format</span><span class="keyword">((</span><span class="string">'Y-m-d'</span><span class="keyword">)).</span><span class="string">"&lt;br&gt;"</span><span class="keyword">);<br />
echo(</span><span class="string">'k ' </span><span class="keyword">. </span><span class="default">MonthShifter</span><span class="keyword">(</span><span class="default">$x</span><span class="keyword">,-</span><span class="default">11</span><span class="keyword">)-&gt;</span><span class="default">format</span><span class="keyword">((</span><span class="string">'Y-m-d'</span><span class="keyword">)).</span><span class="string">"&lt;br&gt;"</span><span class="keyword">);<br />
<br />
</span><span class="comment">//returns<br />
<br />
</span><span class="default">2017</span><span class="keyword">-</span><span class="default">01</span><span class="keyword">-</span><span class="default">30 past end of feb</span><span class="keyword">, </span><span class="default">but not dec<br />
b 2017</span><span class="keyword">-</span><span class="default">02</span><span class="keyword">-</span><span class="default">28<br />
c 2016</span><span class="keyword">-</span><span class="default">12</span><span class="keyword">-</span><span class="default">30<br />
<br />
2017</span><span class="keyword">-</span><span class="default">01</span><span class="keyword">-</span><span class="default">15 middle of the month <br />
d 2017</span><span class="keyword">-</span><span class="default">02</span><span class="keyword">-</span><span class="default">15<br />
e 2016</span><span class="keyword">-</span><span class="default">12</span><span class="keyword">-</span><span class="default">15<br />
<br />
2017</span><span class="keyword">-</span><span class="default">02</span><span class="keyword">-</span><span class="default">28end of Feb<br />
f 2017</span><span class="keyword">-</span><span class="default">03</span><span class="keyword">-</span><span class="default">31<br />
g 2017</span><span class="keyword">-</span><span class="default">01</span><span class="keyword">-</span><span class="default">31<br />
<br />
2017</span><span class="keyword">-</span><span class="default">01</span><span class="keyword">-</span><span class="default">31end of Jan<br />
h 2017</span><span class="keyword">-</span><span class="default">02</span><span class="keyword">-</span><span class="default">28<br />
i 2016</span><span class="keyword">-</span><span class="default">12</span><span class="keyword">-</span><span class="default">31<br />
<br />
2017</span><span class="keyword">-</span><span class="default">01</span><span class="keyword">-</span><span class="default">31end of Jan </span><span class="keyword">+/- </span><span class="default">1 years diff</span><span class="keyword">, </span><span class="default">leap year respected<br />
j 2018</span><span class="keyword">-</span><span class="default">02</span><span class="keyword">-</span><span class="default">28<br />
k 2016</span><span class="keyword">-</span><span class="default">02</span><span class="keyword">-</span><span class="default">29</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="120238""></a>
  <div class="note">
   <strong class="user">sinus at sinpi dot net</strong>
   <a href="#120238" class="date">30-Nov-2016 07:54</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
A very simple way to ensure we do not cross over month boundaries when adding months is to just go back a few days if the day number got reset:<br />
<br />
<span class="default">&lt;?php<br />
</span><span class="keyword">function </span><span class="default">addMonths</span><span class="keyword">(</span><span class="default">$date</span><span class="keyword">,</span><span class="default">$months</span><span class="keyword">) {<br />
&nbsp; </span><span class="default">$orig_day </span><span class="keyword">= </span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">"d"</span><span class="keyword">);<br />
&nbsp; </span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">modify</span><span class="keyword">(</span><span class="string">"+"</span><span class="keyword">.</span><span class="default">$months</span><span class="keyword">.</span><span class="string">" months"</span><span class="keyword">);<br />
&nbsp; while (</span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">"d"</span><span class="keyword">)&lt;</span><span class="default">$orig_day </span><span class="keyword">&amp;&amp; </span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">"d"</span><span class="keyword">)&lt;</span><span class="default">5</span><span class="keyword">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">modify</span><span class="keyword">(</span><span class="string">"-1 day"</span><span class="keyword">);<br />
&nbsp; }<br />
}<br />
<br />
for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">5</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp; </span><span class="default">$d </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">"2000-01-10"</span><span class="keyword">);<br />
&nbsp; </span><span class="default">addmonths</span><span class="keyword">(</span><span class="default">$d</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">);<br />
&nbsp; echo </span><span class="default">$d</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">"Y-m-d"</span><span class="keyword">).</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />
}<br />
for (</span><span class="default">$i</span><span class="keyword">=</span><span class="default">0</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">&lt;</span><span class="default">5</span><span class="keyword">;</span><span class="default">$i</span><span class="keyword">++) {<br />
&nbsp; </span><span class="default">$d </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">"2000-01-31"</span><span class="keyword">);<br />
&nbsp; </span><span class="default">addmonths</span><span class="keyword">(</span><span class="default">$d</span><span class="keyword">,</span><span class="default">$i</span><span class="keyword">);<br />
&nbsp; echo </span><span class="default">$d</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">"Y-m-d"</span><span class="keyword">).</span><span class="string">"&lt;br&gt;"</span><span class="keyword">;<br />
}<br />
</span><span class="default">?&gt;<br />
</span><br />
prints:<br />
2000-01-10<br />
2000-02-10<br />
2000-03-10<br />
2000-04-10<br />
2000-05-10<br />
2000-01-31<br />
2000-02-29<br />
2000-03-31<br />
2000-04-30<br />
2000-05-31</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="119082""></a>
  <div class="note">
   <strong class="user">Anonymous</strong>
   <a href="#119082" class="date">31-Mar-2016 12:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
I cant believe this is in official PHPDOC, such an incredible retarded bug, and, best of all, No explanation at all... this is the kind of things that make PHPCore developers look like fools.<br />
<br />
<span class="default">&lt;?php<br />
$date </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">'2000-12-31'</span><span class="keyword">);<br />
<br />
</span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">modify</span><span class="keyword">(</span><span class="string">'+1 month'</span><span class="keyword">);<br />
echo </span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y-m-d'</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br />
<br />
</span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">modify</span><span class="keyword">(</span><span class="string">'+1 month'</span><span class="keyword">);<br />
echo </span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y-m-d'</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
Result:<br />
<br />
2001-01-31<br />
2001-03-03</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="117600""></a>
  <div class="note">
   <strong class="user">www dot wesley at gmail dot com</strong>
   <a href="#117600" class="date">05-Jul-2015 05:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
This is an improvement of @jenspj's answer<br />
<br />
<span class="default">&lt;?php<br />
<br />
$d </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">'2007-12-31'</span><span class="keyword">);<br />
<br />
function </span><span class="default">addMonths</span><span class="keyword">(</span><span class="default">$date</span><span class="keyword">, </span><span class="default">$months</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$years </span><span class="keyword">= </span><span class="default">floor</span><span class="keyword">(</span><span class="default">abs</span><span class="keyword">(</span><span class="default">$months </span><span class="keyword">/ </span><span class="default">12</span><span class="keyword">));<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$leap </span><span class="keyword">= </span><span class="default">29 </span><span class="keyword">&lt;= </span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'d'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$m </span><span class="keyword">= </span><span class="default">12 </span><span class="keyword">* (</span><span class="default">0 </span><span class="keyword">&lt;= </span><span class="default">$months</span><span class="keyword">?</span><span class="default">1</span><span class="keyword">:-</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; for (</span><span class="default">$a </span><span class="keyword">= </span><span class="default">1</span><span class="keyword">;</span><span class="default">$a </span><span class="keyword">&lt; </span><span class="default">$years</span><span class="keyword">;++</span><span class="default">$a</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$date </span><span class="keyword">= </span><span class="default">addMonths</span><span class="keyword">(</span><span class="default">$date</span><span class="keyword">, </span><span class="default">$m</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$months </span><span class="keyword">-= (</span><span class="default">$a </span><span class="keyword">- </span><span class="default">1</span><span class="keyword">) * </span><span class="default">$m</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$init </span><span class="keyword">= clone </span><span class="default">$date</span><span class="keyword">;<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">0 </span><span class="keyword">!= </span><span class="default">$months</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$modifier </span><span class="keyword">= </span><span class="default">$months </span><span class="keyword">. </span><span class="string">' months'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">modify</span><span class="keyword">(</span><span class="default">$modifier</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if (</span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'m'</span><span class="keyword">) % </span><span class="default">12 </span><span class="keyword">!= (</span><span class="default">12 </span><span class="keyword">+ </span><span class="default">$months </span><span class="keyword">+ </span><span class="default">$init</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'m'</span><span class="keyword">)) % </span><span class="default">12</span><span class="keyword">) {<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$day </span><span class="keyword">= </span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'d'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$init</span><span class="keyword">-&gt;</span><span class="default">modify</span><span class="keyword">(</span><span class="string">"-</span><span class="keyword">{</span><span class="default">$day</span><span class="keyword">}</span><span class="string"> days"</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$init</span><span class="keyword">-&gt;</span><span class="default">modify</span><span class="keyword">(</span><span class="default">$modifier</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$y </span><span class="keyword">= </span><span class="default">$init</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; if (</span><span class="default">$leap </span><span class="keyword">&amp;&amp; (</span><span class="default">$y </span><span class="keyword">% </span><span class="default">4</span><span class="keyword">) == </span><span class="default">0 </span><span class="keyword">&amp;&amp; (</span><span class="default">$y </span><span class="keyword">% </span><span class="default">100</span><span class="keyword">) != </span><span class="default">0 </span><span class="keyword">&amp;&amp; </span><span class="default">28 </span><span class="keyword">== </span><span class="default">$init</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'d'</span><span class="keyword">)) {<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$init</span><span class="keyword">-&gt;</span><span class="default">modify</span><span class="keyword">(</span><span class="string">'+1 day'</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; }<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">$init</span><span class="keyword">;<br />
}<br />
<br />
function </span><span class="default">addYears</span><span class="keyword">(</span><span class="default">$date</span><span class="keyword">, </span><span class="default">$years</span><span class="keyword">)<br />
{<br />
&nbsp;&nbsp;&nbsp; return </span><span class="default">addMonths</span><span class="keyword">(</span><span class="default">$date</span><span class="keyword">, </span><span class="default">12 </span><span class="keyword">* </span><span class="default">$years</span><span class="keyword">);<br />
}<br />
<br />
echo </span><span class="default">$d</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'F j,Y'</span><span class="keyword">) . </span><span class="string">' N&lt;br /&gt;'</span><span class="keyword">;<br />
</span><span class="default">$d </span><span class="keyword">= </span><span class="default">addMonths</span><span class="keyword">(</span><span class="default">$d</span><span class="keyword">, +</span><span class="default">1</span><span class="keyword">);<br />
echo </span><span class="default">$d</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'F j,Y'</span><span class="keyword">) . </span><span class="string">' +1M&lt;br /&gt;'</span><span class="keyword">;<br />
</span><span class="default">$d </span><span class="keyword">= </span><span class="default">addMonths</span><span class="keyword">(</span><span class="default">$d</span><span class="keyword">, +</span><span class="default">1</span><span class="keyword">);<br />
echo </span><span class="default">$d</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'F j,Y'</span><span class="keyword">) . </span><span class="string">' +1M&lt;br /&gt;'</span><span class="keyword">;<br />
</span><span class="default">$d </span><span class="keyword">= </span><span class="default">addYears</span><span class="keyword">(</span><span class="default">$d</span><span class="keyword">, +</span><span class="default">60</span><span class="keyword">);<br />
echo </span><span class="default">$d</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'F j,Y'</span><span class="keyword">) . </span><span class="string">' +60Y&lt;br /&gt;'</span><span class="keyword">;<br />
</span><span class="default">$d </span><span class="keyword">= </span><span class="default">addYears</span><span class="keyword">(</span><span class="default">$d</span><span class="keyword">, -</span><span class="default">59</span><span class="keyword">);<br />
echo </span><span class="default">$d</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'F j,Y'</span><span class="keyword">) . </span><span class="string">' -59Y&lt;br /&gt;'</span><span class="keyword">;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="115018""></a>
  <div class="note">
   <strong class="user">66Ton99</strong>
   <a href="#115018" class="date">14-May-2014 12:31</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Extension for DateTime class which solves problem of adding or subtracting months<br />
<br />
https://gist.github.com/66Ton99/60571ee49bf1906aaa1c</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="114814""></a>
  <div class="note">
   <strong class="user">admin at wmfoi dot com dot br</strong>
   <a href="#114814" class="date">09-Apr-2014 05:22</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The changelog says: "5.3.0 - Changed the return value on success from NULL to DateTime".<br />
<br />
That means that you can't do a Fluid Interface design with it in PHP 5.2.<br />
<br />
In other words, this will not work in 5.2:<br />
<br />
<span class="default">&lt;?php<br />
$DateTime</span><span class="keyword">=new </span><span class="default">DateTime</span><span class="keyword">();<br />
echo </span><span class="default">$DateTime</span><span class="keyword">-&gt;</span><span class="default">modify</span><span class="keyword">(</span><span class="string">'+1 day'</span><span class="keyword">)-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'d'</span><span class="keyword">);<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113549""></a>
  <div class="note">
   <strong class="user">jay dot removethis at grooveshark dot com</strong>
   <a href="#113549" class="date">29-Oct-2013 02:46</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Due to DST and the way DateTime internally handles dates, it's possible to get stuck in a time loop.<br />
<br />
For example:<br />
<br />
<span class="default">&lt;?php<br />
$dt </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">'2012-03-11 3:00AM'</span><span class="keyword">);<br />
echo </span><span class="default">$dt</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'YmdH'</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br />
</span><span class="default">$dt</span><span class="keyword">-&gt;</span><span class="default">modify</span><span class="keyword">(</span><span class="string">"-1 hour"</span><span class="keyword">);<br />
echo </span><span class="default">$dt</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'YmdH'</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br />
</span><span class="default">$dt</span><span class="keyword">-&gt;</span><span class="default">modify</span><span class="keyword">(</span><span class="string">"-1 hour"</span><span class="keyword">);<br />
echo </span><span class="default">$dt</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'YmdH'</span><span class="keyword">) . </span><span class="string">"\n"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
prints out:<br />
<br />
2012031103<br />
2012031103<br />
2012031103<br />
<br />
if your timezone is set to America/New_York.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="113532""></a>
  <div class="note">
   <strong class="user">php at lanar dot com dot au</strong>
   <a href="#113532" class="date">26-Oct-2013 03:50</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
modify() ignores any timezone information in the data while the DateTime constructor does not.<br />
<br />
$dt = new DateTime( '2013-10-26T11:00:00+11:00' ) <br />
will create a +11 timezone while<br />
$dt-&gt;modify( '2013-10-26T11:00:00+02:00' )<br />
does not change the timezone or the time.<br />
<br />
<span class="default">&lt;?php<br />
$dt </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">( </span><span class="string">'2013-10-26T15:00:00Australia/Melbourne' </span><span class="keyword">) ;<br />
echo </span><span class="string">"\n"</span><span class="keyword">, </span><span class="default">$dt</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">( </span><span class="string">"c" </span><span class="keyword">) ;<br />
echo </span><span class="string">"\nTimezone '"</span><span class="keyword">, </span><span class="default">$dt</span><span class="keyword">-&gt;</span><span class="default">getTimezone</span><span class="keyword">()-&gt;</span><span class="default">getName</span><span class="keyword">() . </span><span class="string">"'." </span><span class="keyword">;<br />
</span><span class="comment">// modify $dt to 1 am new york which is 3 pm melbourne<br />
</span><span class="default">$dt</span><span class="keyword">-&gt;</span><span class="default">modify</span><span class="keyword">( </span><span class="string">'2013-10-26T01:00:00America/New_York' </span><span class="keyword">) ;<br />
</span><span class="comment">// result is 1 am melbourne time, not 3 pm<br />
</span><span class="keyword">echo </span><span class="string">"\n"</span><span class="keyword">, </span><span class="default">$dt</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">( </span><span class="string">"c" </span><span class="keyword">) ;<br />
echo </span><span class="string">"\nTimezone '"</span><span class="keyword">, </span><span class="default">$dt</span><span class="keyword">-&gt;</span><span class="default">getTimezone</span><span class="keyword">()-&gt;</span><span class="default">getName</span><span class="keyword">() . </span><span class="string">"'." </span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span>Output<br />
2013-10-26T15:00:00+11:00<br />
Timezone 'Australia/Melbourne'.<br />
2013-10-26T01:00:00+11:00<br />
Timezone 'Australia/Melbourne'.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="108303""></a>
  <div class="note">
   <strong class="user">Jenny jsimonds@atomic jet packs dot com</strong>
   <a href="#108303" class="date">16-Apr-2012 06:04</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note: This method modifies the object in-place. So if you want to calculate a new date but assign the new value to a different object, this will NOT work:<br />
<br />
<span class="default">&lt;?php<br />
$numMinutes </span><span class="keyword">= </span><span class="default">25</span><span class="keyword">;<br />
</span><span class="default">$oDateA </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">'2012-01-01 12:00:00'</span><span class="keyword">);<br />
<br />
print </span><span class="string">"<br />
Original:&lt;br&gt;<br />
oDateA =&nbsp; </span><span class="keyword">{</span><span class="default">$oDateA</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y-m-d H-i-s'</span><span class="keyword">)}</span><span class="string">&lt;br&gt;<br />
"</span><span class="keyword">;<br />
<br />
</span><span class="default">$oDateB </span><span class="keyword">= </span><span class="default">$oDateA</span><span class="keyword">-&gt;</span><span class="default">modify </span><span class="keyword">(</span><span class="string">"+</span><span class="keyword">{</span><span class="default">$numMinutes</span><span class="keyword">}</span><span class="string"> minutes"</span><span class="keyword">);<br />
<br />
print </span><span class="string">"<br />
plus </span><span class="keyword">{</span><span class="default">$numMinutes</span><span class="keyword">}</span><span class="string"> minutes:&lt;br&gt;<br />
oDateA =&nbsp; </span><span class="keyword">{</span><span class="default">$oDateA</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y-m-d H-i-s'</span><span class="keyword">)}</span><span class="string">&lt;br&gt;<br />
oDateB =&nbsp; </span><span class="keyword">{</span><span class="default">$oDateB</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y-m-d H-i-s'</span><span class="keyword">)}</span><span class="string">&lt;br&gt;<br />
"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span>...produces this:<br />
oDateA = 2012-01-01 12-00-00<br />
plus 25 minutes:<br />
oDateA = 2012-01-01 12-25-00<br />
oDateB = 2012-01-01 12-25-00<br />
<br />
Use something like this instead:<br />
<span class="default">&lt;?php<br />
$numMinutes </span><span class="keyword">= </span><span class="default">25</span><span class="keyword">;<br />
</span><span class="default">$oDateA </span><span class="keyword">= new </span><span class="default">DateTime</span><span class="keyword">(</span><span class="string">'2012-01-01 12:00:00'</span><span class="keyword">);<br />
<br />
print </span><span class="string">"<br />
&lt;p&gt;<br />
Original:&lt;br&gt;<br />
oDateA =&nbsp; </span><span class="keyword">{</span><span class="default">$oDateA</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y-m-d H-i-s'</span><span class="keyword">)}</span><span class="string">&lt;br&gt;<br />
"</span><span class="keyword">;<br />
<br />
</span><span class="default">$oDateB </span><span class="keyword">= clone </span><span class="default">$oDateA</span><span class="keyword">;<br />
</span><span class="default">$oDateB</span><span class="keyword">-&gt;</span><span class="default">modify </span><span class="keyword">(</span><span class="string">"+</span><span class="keyword">{</span><span class="default">$numMinutes</span><span class="keyword">}</span><span class="string"> minutes"</span><span class="keyword">);<br />
<br />
print </span><span class="string">"<br />
plus </span><span class="keyword">{</span><span class="default">$numMinutes</span><span class="keyword">}</span><span class="string"> minutes:&lt;br&gt;<br />
oDateA =&nbsp; </span><span class="keyword">{</span><span class="default">$oDateA</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y-m-d H-i-s'</span><span class="keyword">)}</span><span class="string">&lt;br&gt;<br />
oDateB =&nbsp; </span><span class="keyword">{</span><span class="default">$oDateB</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'Y-m-d H-i-s'</span><span class="keyword">)}</span><span class="string">&lt;br&gt;<br />
"</span><span class="keyword">;<br />
</span><span class="default">?&gt;<br />
</span><br />
... produces this:<br />
oDateA = 2012-01-01 12-00-00<br />
plus 25 minutes:<br />
oDateA = 2012-01-01 12-00-00<br />
oDateB = 2012-01-01 12-25-00</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="107592""></a>
  <div class="note">
   <strong class="user">jenspj at msn dot com</strong>
   <a href="#107592" class="date">20-Feb-2012 11:34</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
These functions makes sure that adding months or years always ends up in the month you would expect.&nbsp; Works for positive and negative values<br />
<br />
<span class="default">&lt;?php<br />
&nbsp;&nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; $date</span><span class="keyword">=new </span><span class="default">DateTime</span><span class="keyword">();<br />
&nbsp;&nbsp;&nbsp; </span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">setDate</span><span class="keyword">(</span><span class="default">2008</span><span class="keyword">,</span><span class="default">2</span><span class="keyword">,</span><span class="default">29</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">addMonths</span><span class="keyword">(</span><span class="default">$date</span><span class="keyword">,</span><span class="default">$months</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$init</span><span class="keyword">=clone </span><span class="default">$date</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$modifier</span><span class="keyword">=</span><span class="default">$months</span><span class="keyword">.</span><span class="string">' months'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$back_modifier </span><span class="keyword">=-</span><span class="default">$months</span><span class="keyword">.</span><span class="string">' months'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">modify</span><span class="keyword">(</span><span class="default">$modifier</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$back_to_init</span><span class="keyword">= clone </span><span class="default">$date</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$back_to_init</span><span class="keyword">-&gt;</span><span class="default">modify</span><span class="keyword">(</span><span class="default">$back_modifier</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while(</span><span class="default">$init</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'m'</span><span class="keyword">)!=</span><span class="default">$back_to_init</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'m'</span><span class="keyword">)){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">modify</span><span class="keyword">(</span><span class="string">'-1 day'</span><span class="keyword">)&nbsp; &nbsp; ;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$back_to_init</span><span class="keyword">= clone </span><span class="default">$date</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$back_to_init</span><span class="keyword">-&gt;</span><span class="default">modify</span><span class="keyword">(</span><span class="default">$back_modifier</span><span class="keyword">);&nbsp; &nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; }<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="comment">/*<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if($months&lt;0&amp;&amp;$date-&gt;format('m')&gt;$init-&gt;format('m'))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while($date-&gt;format('m')-12-$init-&gt;format('m')!=$months%12)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $date-&gt;modify('-1 day');<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; if($months&gt;0&amp;&amp;$date-&gt;format('m')&lt;$init-&gt;format('m'))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while($date-&gt;format('m')+12-$init-&gt;format('m')!=$months%12)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $date-&gt;modify('-1 day');<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; else<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while($date-&gt;format('m')-$init-&gt;format('m')!=$months%12)<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; $date-&gt;modify('-1 day');<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; */<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="keyword">}<br />
&nbsp;&nbsp; &nbsp; <br />
&nbsp;&nbsp;&nbsp; function </span><span class="default">addYears</span><span class="keyword">(</span><span class="default">$date</span><span class="keyword">,</span><span class="default">$years</span><span class="keyword">){<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$init</span><span class="keyword">=clone </span><span class="default">$date</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$modifier</span><span class="keyword">=</span><span class="default">$years</span><span class="keyword">.</span><span class="string">' years'</span><span class="keyword">;<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">modify</span><span class="keyword">(</span><span class="default">$modifier</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; while(</span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'m'</span><span class="keyword">)!=</span><span class="default">$init</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'m'</span><span class="keyword">))<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; </span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">modify</span><span class="keyword">(</span><span class="string">'-1 day'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp; &nbsp; &nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; } <br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="default">addMonths</span><span class="keyword">(</span><span class="default">$date</span><span class="keyword">,-</span><span class="default">1</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; </span><span class="default">addYears</span><span class="keyword">(</span><span class="default">$date</span><span class="keyword">,</span><span class="default">3</span><span class="keyword">);<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; echo </span><span class="default">$date</span><span class="keyword">-&gt;</span><span class="default">format</span><span class="keyword">(</span><span class="string">'F j,Y'</span><span class="keyword">);<br />
&nbsp;&nbsp; &nbsp; <br />
&nbsp;<br />
</span><span class="default">?&gt;</span>
</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="datetime.getlasterrors.html">DateTime::getLastErrors</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="datetime.set-state.html">DateTime::__set_state</a></div>
 <div class="up"><a href="class.datetime.html">DateTime</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
