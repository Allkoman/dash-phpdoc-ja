<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>キャッシュされたスクリプトを無効にする</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.opcache-get-status.html">opcache_get_status</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.opcache-is-script-cached.html">opcache_is_script_cached</a></div>
 <div class="up"><a href="ref.opcache.html">OPcache 関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.opcache-invalidate" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">opcache_invalidate</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.5.0, PHP 7, PECL ZendOpcache &gt;= 7.0.0)</p><p class="refpurpose"><span class="refname">opcache_invalidate</span> &mdash; <span class="dc-title">キャッシュされたスクリプトを無効にする</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.opcache-invalidate-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">boolean</span> <span class="methodname"><strong>opcache_invalidate</strong></span>
    ( <span class="methodparam"><span class="type">string</span> <code class="parameter">$script</code></span>
   [, <span class="methodparam"><span class="type">boolean</span> <code class="parameter">$force</code><span class="initializer"> = <strong><code>FALSE</code></strong></span></span>
  ] )</div>

  <p class="para rdfs-comment">
   この関数は opcode キャッシュのうち、特定のスクリプトを無効にします。
   <code class="parameter">force</code> パラメータが指定されていないか、 <strong><code>FALSE</code></strong> の場合は、スクリプトの更新時刻が opcode キャッシュ時の更新時刻より新しい場合にだけ無効にします。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.opcache-invalidate-parameters">
  <h3 class="title">パラメータ</h3>
  <dl>

   
    <dt>
<code class="parameter">script</code></dt>

    <dd>

     <p class="para">
      無効にしたいスクリプトのパス
     </p>
    </dd>

   
   
    <dt>
<code class="parameter">force</code></dt>

    <dd>

     <p class="para">
      <strong><code>TRUE</code></strong> にすると、無効にする必要があるかどうかに関わらずスクリプトは無効にされます。
     </p>
    </dd>

   
  </dl>

 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.opcache-invalidate-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   <code class="parameter">script</code> の opcode キャッシュが無効にされたか、無効にする対象が存在しない場合は <strong><code>TRUE</code></strong> を返します。
   opcode キャッシュ機能そのものが無効にされている場合は <strong><code>FALSE</code></strong> を返します。
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.opcache-invalidate-seealso">
  <h3 class="title">参考</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.opcache-compile-file.html" class="function" rel="rdfs-seeAlso">opcache_compile_file()</a> - PHP スクリプトを、実行せずにコンパイルしてキャッシュする</span></li>
    <li class="member"><span class="function"><a href="function.opcache-reset.html" class="function" rel="rdfs-seeAlso">opcache_reset()</a> - opcode のキャッシュ内容をリセットする</span></li>
   </ul>
  </p>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="119026""></a>
  <div class="note">
   <strong class="user">kaare at colourbox dot com</strong>
   <a href="#119026" class="date">18-Mar-2016 07:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that invalidation doesn't actually evict anything from the cache, it just forces a recompile. You can verify this by calling opcache_get_status() and seeing that the invalidated script is not actually removed from "scripts". This means it cannot be used as a more graceful alternative to opcache_reset() when the cache is full ("cache_full":true in status). The cache will eventually fill up and refuse to cache new requests if you do atomic deployment of PHP code by changing the web server's document root. It appears opcache_reset() is the only way to prevent this, but opcache_reset() can disable the cache for any amount of time while attempting to restart, causing load spikes.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="116372""></a>
  <div class="note">
   <strong class="user">joel at taotesting dot com</strong>
   <a href="#116372" class="date">22-Dec-2014 11:14</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Beware that only existing files can be invalidated.<br />
<br />
Instead of removing a file from opcache that you have delete, you need to call opcache_invalidate before deleting it.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.opcache-get-status.html">opcache_get_status</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="function.opcache-is-script-cached.html">opcache_is_script_cached</a></div>
 <div class="up"><a href="ref.opcache.html">OPcache 関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
