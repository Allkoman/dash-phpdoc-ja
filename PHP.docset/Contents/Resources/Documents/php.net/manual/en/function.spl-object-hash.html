<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; CHARSET=shift-jis">
  <title>指定したオブジェクトのハッシュ ID を返す</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <link media="all" rel="stylesheet" type="text/css" href="style.css"/>
 </head>
 <body class="docs"><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.spl-classes.html">spl_classes</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="spl.files.html">ファイル操作</a></div>
 <div class="up"><a href="ref.spl.html">SPL 関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.spl-object-hash" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">spl_object_hash</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.2.0, PHP 7)</p><p class="refpurpose"><span class="refname">spl_object_hash</span> &mdash; <span class="dc-title">
   指定したオブジェクトのハッシュ ID を返す
  </span></p>

 </div>
 <div class="refsect1 description" id="refsect1-function.spl-object-hash-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">string</span> <span class="methodname"><strong>spl_object_hash</strong></span>
    ( <span class="methodparam"><span class="type">object</span> <code class="parameter">$obj</code></span>
   )</div>

  <p class="para rdfs-comment">
   この関数は、オブジェクトの一意な識別子を返します。この ID は、
   オブジェクトを保存する際のハッシュのキーとして使えます。
   また、オブジェクトが破棄されるまでは、オブジェクトを識別するための値としても使えます。
   オブジェクトが破棄されると、そのハッシュが他のオブジェクトで再利用されてしまうことがあります。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.spl-object-hash-parameters">
   <h3 class="title">パラメータ</h3>
   <p class="para">
    <dl>

     
      <dt>
<code class="parameter">object</code></dt>

      <dd>

       <p class="para">
        何らかのオブジェクト。
       </p>
      </dd>

     
    </dl>

   </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.spl-object-hash-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   現在存在する各オブジェクトに固有で、同一オブジェクトに対しては常に同じ値となる文字列を返します。
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.spl-object-hash-examples">
  <h3 class="title">例</h3>
  <p class="para">
   <div class="example" id="regexiterator.setpregflags.example.basic">
    <p><strong>例1 <span class="function"><strong>spl_object_hash()</strong></span> の例</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$id&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">spl_object_hash</span><span style="color: #007700">(</span><span style="color: #0000BB">$object</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$storage</span><span style="color: #007700">[</span><span style="color: #0000BB">$id</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">$object</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.spl-object-hash-notes">
  <h3 class="title">注意</h3>
  <blockquote class="note"><p><strong class="note">注意</strong>: 
   <p class="para">
    オブジェクトが破壊されるとき、そのハッシュが他のオブジェクトで再利用されてしまうことがあります。
   </p>
  </p></blockquote>
 </div>

</div><div id="usernotes">
 <div class="head">
  <h3 class="title">User Contributed Notes</h3>
 </div>
<div id="allnotes">  <a name="121491""></a>
  <div class="note">
   <strong class="user">Hayleu Watson</strong>
   <a href="#121491" class="date">07-Aug-2017 07:55</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The "hash" mentioned in the name of this function refers to the storage structure known as a "hash table", not to any sort of "message digest". The string returned by this function is little more than the object's address in the (hash) table PHP maintains of all existing objects.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="121490""></a>
  <div class="note">
   <strong class="user">Hayley Watson</strong>
   <a href="#121490" class="date">07-Aug-2017 07:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The "hash" mentioned in this function is used in the sense of the storage structure known as a "hash table", not in the sense of "message digest".</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="121489""></a>
  <div class="note">
   <strong class="user">Hayley Watson</strong>
   <a href="#121489" class="date">07-Aug-2017 07:26</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
The "hash" mentioned in this function is used in the sense of the storage structure known as a "hash table", not in the sense of "message digest".</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="121277""></a>
  <div class="note">
   <strong class="user">Ulrich Eckhardt</strong>
   <a href="#121277" class="date">27-Jun-2017 04:56</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Calling this a hash is very misleading:<br />
<br />
1. This function gives an object identifier (ID), which uniquely identifies the object for its whole lifetime. This is similar to the address of an object in C or the id() function in Python. I'm sure other languages have similar constructs.<br />
2. This is not a hash and has nothing to do with it. A hash takes data and algorithmically reduces that data to some kind of scalar value. The only guarantee is that two equal inputs provide the same output, but not that two different inputs provide different outputs (hint: hash collisions). spl_object_hash() guarantees different outputs for non-identical objects though.<br />
3. As someone mentioned already, this does not look at the content of the object. If you consider the difference between equality and identity, it only allows determining identity. If you serialize and unserialize an object, it will not be identical to its former self, but it will be equal, just to give an example. If you want a key to use in a response cache, using this function on the request is not only useless, because equal requests have different IDs, but possibly even harmful, because when a request object is garbage collected, its ID can be reused.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="112199""></a>
  <div class="note">
   <strong class="user">mjs at beebo dot org</strong>
   <a href="#112199" class="date">16-May-2013 08:20</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that given two different objects spl_object_hash() can return values that look very similar, and in fact both the most significant *and* least significant digits are likely to be identical!&nbsp; e.g. "000000003cc56d770000000007fa48c5" and "000000003cc56d0d0000000007fa48c5".<br />
<br />
Therefore (especially if using this function for debugging), you may wish to pass the hash into a cryptographic hash function like md5() to get to facilitate visual comparisons, and make it more likely that the first few or last few digits are unique.<br />
<br />
md5("000000003cc56d770000000007fa48c5") -&gt; "619a799747d348fa1caf181a72b65d9f"<br />
<br />
md5("000000003cc56d0d0000000007fa48c5") -&gt; "ae964bc912281e7804fe5a88b4546cb2"</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
  <a name="76220""></a>
  <div class="note">
   <strong class="user">planetbeing</strong>
   <a href="#76220" class="date">06-Jul-2007 01:40</a>
   <div class="text">
    <div class="phpcode">
<code><span class="html">
Note that the contents (properties) of the object are NOT hashed by the function, merely its internal handle and handler table pointer. This is sufficient to guarantee that any two objects simultaneously co-residing in memory will have different hashes. Uniqueness is not guaranteed between objects that did not reside in memory simultaneously, for example:<br />
<br />
var_dump(spl_object_hash(new stdClass()), spl_object_hash(new stdClass()));<br />
<br />
Running this alone will usually generate the same hashes, since PHP reuses the internal handle for the first stdClass after it has been dereferenced and destroyed when it creates the second stdClass.</span>
</code>
    </div>
   </div>
  </div>
 <div class="foot"></div>
</div>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.spl-classes.html">spl_classes</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="spl.files.html">ファイル操作</a></div>
 <div class="up"><a href="ref.spl.html">SPL 関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
